top_srcdir:=$(shell pwd)
#include $(top_srcdir)/Rules.mk
DIR=$(shell pwd)
BUILD_OUTPUT=$(DIR)/tmp
SRCS=$(wildcard *.c)
OBJS=$(patsubst %.c, $(BUILD_OUTPUT)/%.o, $(SRCS))
DEPS=$(patsubst %.o, %.d, $(OBJS))
CFLAGS+=-Wall -W -g -I$(DIR)/include
LDFLAGS=
ifdef ENABLE_GCOV
ifeq ($(ENABLE_GCOV), y)
LDFLAGS+= -lgcov
endif
endif # ENABLE_GCOV
PROGRAM=hw_test.bin

.PHONY: all

all:$(OBJS)
	$(CC)  $(OBJS) $(LDFLAGS) -o $(BUILD_OUTPUT)/$(PROGRAM)
	cp -p $(BUILD_OUTPUT)/$(PROGRAM) $(common_out_put_dir)	


$(OBJS):$(SRCS)
	@if [ ! -d ${BUILD_OUTPUT} ]; then mkdir -p ${BUILD_OUTPUT} ;fi
	$(CC)  -c $(CFLAGS) $(INCLUDE) $(*F).c -o $@
	
.PHONY: install
install:
	@mkdir -p $(install_sbin_dir)
	cp -p $(BUILD_OUTPUT)/$(PROGRAM) $(common_out_put_dir)	

	
rebuild: clean all
clean:
	@rm -rf $(BUILD_OUTPUT)/*