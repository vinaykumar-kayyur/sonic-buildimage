#!/bin/bash

i2cget -y 72 0x58 0 b > /dev/null
if [ $? -ne 0 ];then
    printf "Device DS100(0x58) not found\n"
    i2cdetect -y 0
    exit 1
else
    printf "Device DS100(0x58) exits\n"
fi

# Mux setting
i2cset -y 72 0x58 0x06 0x18
i2cset -y 72 0x58 0x0F 0x00
i2cset -y 72 0x58 0x16 0x00
i2cset -y 72 0x58 0x17 0xAA
i2cset -y 72 0x58 0x18 0x00
i2cset -y 72 0x58 0x1D 0x00
i2cset -y 72 0x58 0x24 0x00
i2cset -y 72 0x58 0x25 0xA8
i2cset -y 72 0x58 0x26 0x00
i2cset -y 72 0x58 0x2C 0x00
i2cset -y 72 0x58 0x2D 0xAA
i2cset -y 72 0x58 0x2E 0x00
i2cset -y 72 0x58 0x34 0xAA
i2cset -y 72 0x58 0x35 0x00
i2cset -y 72 0x58 0x3A 0x00
i2cset -y 72 0x58 0x3B 0xAA
i2cset -y 72 0x58 0x3C 0x00
i2cset -y 72 0x58 0x41 0x00
i2cset -y 72 0x58 0x42 0xAA
i2cset -y 72 0x58 0x43 0x00

if [ "$1" = "cpu" ];then
    #/* Select MAC to CPU */
    i2cset -y 72 0x58 0x5E 0x06
    i2cset -y 72 0x58 0x5F 0xF0
    echo "Select MAC to CPU"
elif [ "$1" = "fp" ];then
    #/* Select MAC to Front Port */
    i2cset -y 72 0x58 0x5E 0x06
    i2cset -y 72 0x58 0x5F 0x00
    echo "Select MAC to Front Port"
else
    echo "format: ldb_mux_setting.sh {fp | cpu}"
fi

